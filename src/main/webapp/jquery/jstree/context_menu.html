<!DOCTYPE html>
<html>

<head>
<meta charset="ISO-8859-1">
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="jstree.3.1.1/jstree.js"></script>
<link rel="stylesheet" href="jstree.3.1.1/themes/default/style.min.css" />
<title>test jsTree</title>
</head>

<body>
	<h1>test jsTree customized menu</h1>
	<h2>right click on the node to see context menu</h2>

	<div id="using_json"></div>
	
	<label id="infoLabel"></label>

	<br />
	<br />
	<br /> it comes from
	<a href="http://stackoverflow.com/questions/14133984/create-custom-item-in-jstree-context-menu" target=_blank>here</a>

	<script>
		var layerData =  [ 
            {
 				id : 11,
				text : 'Simple root node'

            },
			{
				"id" : 22,
				'text' : 'Root node 2',				
				'state' : 
				{
					'opened' : true,
					'selected' : true
				},
				'children' : 
					[ 
					{					
						"id" : 2211,
						'text' : 'Child 1',
						a_attr : 
						{
							title : "child 1 title"
						}
					}, 
					'Child 2' 
					]
			} ]
		;

	    var contextMenu ={
	        "items": function ($node) {
	            return {
	                "Create4": {
	                    "label": "Create a new employee",
	                    "action": function (obj) {
	                      	var info = document.getElementById('infoLabel');
	                      	info.innerHTML = info.innerHTML +' <br/> click ' + obj.item.label + ' on ' + obj.reference[0].text;
	                    }
	                },
	                "Rename7": {
	                    "label": "Rename an employee",
	                    "action": function (obj) {
	                      	var info = document.getElementById('infoLabel');
	                      	info.innerHTML = info.innerHTML +' <br/> click ' + obj.item.label + ' on ' + obj.reference[0].text; 
	                    }
	                },
	                "Delete9": {
	                    "label": "Delete an employee",
	                    "action": function (obj) {
	                      	var info = document.getElementById('infoLabel');
	                      	info.innerHTML = info.innerHTML +' <br/> click ' + obj.item.label + ' on ' + obj.reference[0].text;
	                    }
	                }
	            };
	        }
	    }
		
		var landingEle = $('#using_json');
	    
	    landingEle.bind('loaded.jstree', function(e, data) {
		    // invoked after jstree has loaded
		    //$(this).jstree("open_node", $(nodes[i]));
          	var info = document.getElementById('infoLabel');
          	info.innerHTML = info.innerHTML +' <br/> jsTree now is loaded ' ;
		});
	    
	    landingEle.bind('ready.jstree', function(e, data) {
          	var info = document.getElementById('infoLabel');
          	info.innerHTML = info.innerHTML +' <br/> jsTree now is ready ' ;         
          	
          	// add title on 'Root node 2', which id is 22
          	var id = layerData[1].id;
          	landingEle.find("#"+id).attr("title", "added by ready.jstree event");
        });
	    
	    
	    // for jsTree data format details, please see http://www.jstree.com/docs/json/
        var jsTreeInitObj = {
            core: {
            	animation: 0,
                data: layerData
            },
			"plugins": [ "contextmenu"],   // this line enable jsTree default context menu
			"contextmenu": contextMenu    // this line customize   context menu
        };
        
	    // finally we create jsTree
	    landingEle.jstree(jsTreeInitObj);
	    

		// this will be triggered when mouse hover on
	    $("#using_json").bind("hover_node.jstree", function (e, data) {
	    	//alert(data.node.text);
	    	//var info = document.getElementById('infoLabel');
	    	//info.innerHTML = info.innerHTML +' <br/> move into  ' + data.node.text  ;
	    	if(window.console){
	    		console.log(' move into  ' + data.node.text  );
	    	}
	    	
	    })



	</script>

</body>
</html>